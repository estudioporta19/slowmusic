<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Metrónomo Avançado</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>Metrónomo Avançado</h1>

    <div class="container">
        
        <div class="global-bpm-control">
            <label for="bpmSlider">BPM: <span id="bpmValue" class="value-display">120</span></label>
            <input type="range" id="bpmSlider" min="40" max="320" value="120">
        </div>

        <hr>

        <div class="mode-selector">
            <button id="modeClassicBtn" class="selected">Metrónomo Clássico</button>
            <button id="modeClaveBtn">Clave Designer</button>
            <button id="modeListBtn">Mapa de Tempo</button>
        </div>

        <hr>

        <div class="metronome-status" id="metronomeStatus"></div>

        <div class="global-controls">
            <button id="playPauseBtn">▶️ Iniciar</button>
            <button id="stopBtn">⏹️ Parar</button>
        </div>
        
        <div id="classicMetronomeModule" class="module-group active-module">
            <h2>Metrónomo Clássico</h2>
            <div class="controls-grid">
                <div class="control-group">
                    <label for="timeNumerator">Tempos: <span id="timeNumeratorValue" class="value-display">4</span></label>
                    <input type="range" id="timeNumerator" min="1" max="16" value="4">
                </div>

                <div class="control-group">
                    <label>Subdivisões:</label>
                    <div class="subdivision-controls">
                        <button id="subdivisionOffBtn" class="selected">OFF</button>
                        <button id="subdivision2Btn">2x</button>
                        <button id="subdivision3Btn">3x</button>
                        <button id="subdivision4Btn">4x</button>
                    </div>
                </div>
                
                <div class="control-group">
                    <label for="accentedBeats">Acentuar (Ex: 3, 5)</label>
                    <input type="text" id="accentedBeats" placeholder="Ex: 3, 5, 7">
                    <small>Tempos a acentuar (separados por vírgulas). O 1º tempo é sempre acentuado.</small>
                </div>
            </div>
        </div>

        
        <div id="claveDesignerModule" class="module-group hidden-module">
    <h2>Clave Designer</h2>
    <div class="clave-designer-container">
        <div class="clave-designer-header">
            <h3>Padrão Personalizado</h3>
            <div class="control-group clave-cycle-control">
                <label for="claveCycleLength">Duração do Ciclo (1-16 semicolcheias): <span id="claveCycleLengthValue" class="value-display">16</span></label>
                <input type="range" id="claveCycleLength" min="1" max="16" value="16">
                <button id="resetClaveBtn" class="control-button">Limpar Grelha / Reset</button> 
            </div>
        </div>
        <div class="clave-grid" id="claveGrid">
            
        </div>
        <div class="clave-info">
            Clique nos pontos para alternar o som: <span style="color:#e74c3c;">Forte</span>, <span style="color:#f39c12;">Médio</span>, <span style="color:#6c757d;">Desligado</span>.<br>
            Cada bloco representa uma semicolcheia.
        </div>
    </div>
</div>

        
        <div id="timeMapModule" class="module-group hidden-module">
            <h2>Mapa de Tempo</h2>
            <div class="time-map-controls">
                <h3>Adicionar Nova Secção</h3>
                <div class="control-group">
                    <label for="sectionType">Tipo de Secção:</label>
                    <select id="sectionType">
                        <option value="classic">Metrónomo Clássico</option>
                        <option value="clave">Clave Designer</option>
                        <option value="pause">Pausa</option>
                    </select>
                </div>

                <div id="timeMapClassicControls" class="section-config-group">
                    <div class="control-group">
                        <label for="sectionBPM">BPM:</label>
                        <input type="number" id="sectionBPM" min="40" max="320" value="120">
                    </div>
                    <div class="control-group">
                        <label for="sectionNumerator">Tempos:</label>
                        <input type="number" id="sectionNumerator" min="1" max="16" value="4">
                    </div>
                    <div class="control-group">
                        <label for="sectionSubdivision">Subdivisões:</label>
                        <select id="sectionSubdivision">
                            <option value="1">OFF</option>
                            <option value="2">2x</option>
                            <option value="3">3x</option>
                            <option value="4">4x</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label for="sectionAccentedBeats">Acentuar (Ex: 3,5):</label>
                        <input type="text" id="sectionAccentedBeats" placeholder="Ex: 3, 5">
                    </div>
                </div>

                <div id="timeMapClaveControls" class="section-config-group hidden">
                    <div class="control-group">
                        <label for="sectionClaveBPM">BPM:</label>
                        <input type="number" id="sectionClaveBPM" min="40" max="320" value="120">
                    </div>
                    <div class="control-group">
                        <label>Padrão Clave (16 semicolcheias):</label>
                        <input type="text" id="sectionClavePattern" placeholder="1000100010001000">
                        <small>1=forte, 2=médio, 0=desligado. 16 dígitos.</small>
                    </div>
                    <div class="control-group">
                        <label for="sectionClaveLength">Duração Ciclo (semicolcheias):</label>
                        <input type="number" id="sectionClaveLength" min="1" max="16" value="16">
                    </div>
                </div>

                <div id="timeMapPauseControls" class="section-config-group hidden">
                    <div class="control-group">
                        <label for="sectionPauseDuration">Duração Pausa (compassos):</label>
                        <input type="number" id="sectionPauseDuration" min="1" value="4">
                    </div>
                </div>

                <div class="control-group">
                    <label for="sectionMeasures">Duração da Secção (compassos):</label>
                    <input type="number" id="sectionMeasures" min="1" value="4">
                </div>

                <button id="addSectionBtn">Adicionar Secção</button>
            </div>

            <h3>Secções do Mapa</h3>
            <ul id="timeMapSectionsList" class="time-map-sections-list">
                </ul>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
